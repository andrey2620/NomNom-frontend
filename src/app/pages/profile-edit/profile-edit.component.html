<section class="container profile-container w-75 p-0 pb-5">
  <div class="row mx-auto">
    <div class="d-flex justify-content-between align-items-center p-0">
      <h1 class="my-4 p-0">Perfil</h1>
    </div>
    <div class="image-profile-contaienr col-3 d-flex justify-content-center aling-items-center flex-column">
      <figure class="image-container mx-auto img-fluid">
        <img src="../../../assets/img/profile/default-profile.webp" alt="" />
      </figure>
      <button class="btn btn-change-image-profile text-center mx-auto">Cambiar imagen</button>
    </div>
    <div class="info-user col-9 d-flex aling-items-center gap-5 px-0">
      <div class="d-flex justify-content-center aling-items-center flex-column w-100">
        <label class="">Nombre completo:</label>
        <input
          type="email"
          autocomplete="email"
          class="border-0 border-bottom border-2 border-black"
          value="{{ profileService.user$().name }}  {{ profileService.user$().lastname }}"
          style="outline: none" />
      </div>
      <div class="d-flex justify-content-center aling-items-center flex-column w-100">
        <label class="">Usuario:</label>
        <input
          type="email"
          autocomplete="email"
          class="border-0 border-bottom border-2 border-black"
          value="{{ profileService.user$().name }}"
          style="outline: none" />
      </div>
    </div>
  </div>
  <hr class="my-4" />
  <div class="row mx-auto">
    <h2 class="title p-0">Cuenta</h2>
    <div class="col-12 d-flex aling-items-center gap-5 px-0">
      <div class="d-flex justify-content-center aling-items-center flex-column w-100">
        <span class="">Correo electrónico:</span>
        <input
          type="email"
          autocomplete="email"
          class="border-0 border-bottom border-2 border-black"
          value="{{ profileService.user$().email }}"
          style="outline: none" />
      </div>
      <div class="d-flex justify-content-center aling-items-center flex-column w-100">
        <label class="">Contraseña:</label>
        <input
          type="password"
          autocomplete="on"
          placeholder="******************"
          class="border-0 border-bottom border-2 border-black"
          style="outline: none" />
      </div>
      <div class="d-flex justify-content-center aling-items-center flex-column w-100">
        <label class="">Confirmar contraseña:</label>
        <input
          type="password"
          autocomplete="on"
          placeholder="******************"
          class="border-0 border-bottom border-2 border-black"
          style="outline: none" />
      </div>
    </div>
  </div>
  <hr class="my-4" />
  <div class="row mx-auto">
    <h2 class="title p-0">Alergias</h2>
    <div class="mb-3 p-0">
      <app-select-custom
        [data]="getAllergiesNames()"
        [selectedValues]="getAllergiesUserIsSelected()"
        [placeholder]="'Seleccione sus alergias'"
        (selectionChange)="syncSelectedAllergies($event)" />
    </div>

    <div class="d-flex flex-wrap gap-2 p-0">
      @for (allergy of allergiesService.allAllergies; track allergy.name) {
        <div
          class="badge rounded-pill px-3 py-2"
          [class.border]="allergy.isSelected"
          [class.border-danger]="allergy.isSelected"
          [class.text-danger]="allergy.isSelected"
          [class.d-block]="allergy.isSelected"
          [class.d-none]="!allergy.isSelected">
          <span class="d-inline-block pe-1">
            <i class="fa-solid fa-triangle-exclamation"></i>
          </span>
          <span>
            {{ allergy.name }}
          </span>
        </div>
      }
    </div>
  </div>
  <hr class="my-4" />
  <div class="row mx-auto">
    <h2 class="title p-0">Preferencias Dietéticas</h2>
    <div class="mb-3 p-0">
      <app-select-custom
        [data]="getDietPreferencesNames()"
        [selectedValues]="getDietPreferencesUserIsSelected()"
        [placeholder]="'Seleccione sus alergias'"
        (selectionChange)="syncSelectedPreferences($event)" />
    </div>
    <div class="d-flex flex-wrap gap-2 p-0">
      @for (preference of dietPreferenceService.allDietPreferences; track preference.name) {
        <div
          class="badge rounded-pill px-3 py-2"
          [class.border]="preference.isSelected"
          [class.border-success]="preference.isSelected"
          [class.text-success]="preference.isSelected"
          [class.d-block]="preference.isSelected"
          [class.d-none]="!preference.isSelected">
          <span class="d-inline-block pe-1">
            <i class="fa-solid fa-utensils"></i>
          </span>
          <span>
            {{ preference.name }}
          </span>
        </div>
      }
    </div>
  </div>
  <div class="my-4 d-flex gap-3">
    <button class="btn btn-save-profile bg-success text-white" (click)="updateSelections()">Guardar</button>
    <a href="/app/profile" class="btn btn-cancel-profile bg-danger text-white">Cancelar</a>
  </div>
</section>
